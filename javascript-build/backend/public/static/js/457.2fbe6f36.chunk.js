"use strict";(self.webpackChunkplaces_project=self.webpackChunkplaces_project||[]).push([[457],{7457:function(e,n,r){r.r(n),r.d(n,{default:function(){return C}});var t=r(885),c=r(2791),s=r(5945),a=r(9518),o=r(5861),i=r(7757),l=r.n(i),u=r(8984),d=r(5152),h=r(184),m=function(e){var n=(0,c.useRef)(),r=e.center,t=e.zoom;return(0,c.useEffect)((function(){var e=new window.google.maps.Map(n.current,{center:r,zoom:t});new window.google.maps.Marker({position:r,map:e})}),[r,t]),(0,h.jsx)("div",{className:"map ".concat(e.className),style:e.style,ref:n})},f=r(4127),p=r(9508),x=r(654),j=function(e){var n=(0,c.useContext)(x.Z),r=(0,c.useState)(!1),i=(0,t.Z)(r,2),j=i[0],v=i[1],Z=(0,c.useState)(!1),C=(0,t.Z)(Z,2),g=C[0],_=C[1],w=function(){return v(!1)},N=function(){return _(!1)},E=(0,p.Z)(),k=E.isLoading,b=E.error,y=E.sendRequest,S=E.resetError,O=function(){var r=(0,o.Z)(l().mark((function r(){var t;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return N(),r.next=3,y("".concat("https://places-project-1.herokuapp.com/api","/places/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+n.token});case 3:(t=r.sent).error||e.onDeletePlace(t.place.id);case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.Z,{show:j,onCancel:w,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,h.jsx)(s.Z,{onClick:w,children:"CLOSE"}),children:(0,h.jsx)("div",{className:"map-container",children:(0,h.jsx)(m,{center:e.coordinates,zoom:16})})}),(0,h.jsx)(f.Z,{show:g,onCancel:N,header:"Are you sure?",contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.Z,{onClick:N,children:"CANCEL"}),(0,h.jsx)(s.Z,{danger:!0,onClick:O,children:"CONFIRM"})]}),children:(0,h.jsx)("p",{children:"Once deleted, changes cannot be undone."})}),(0,h.jsx)(u.Z,{error:b,onClear:S}),(0,h.jsx)("li",{className:"place-item",children:(0,h.jsxs)(a.Z,{className:"place-item__content",children:[k&&(0,h.jsx)(d.Z,{asOverlay:!0}),(0,h.jsx)("div",{className:"place-item__image",children:(0,h.jsx)("img",{src:e.image,alt:e.title})}),(0,h.jsxs)("div",{className:"place-item__info",children:[(0,h.jsx)("h2",{children:e.title}),(0,h.jsx)("h3",{children:e.address}),(0,h.jsx)("p",{children:e.description})]}),(0,h.jsxs)("div",{className:"place-item__actions",children:[(0,h.jsx)(s.Z,{inverse:!0,onClick:function(){return v(!0)},children:"VIEW ON MAP"}),n.userId===e.creatorId&&(0,h.jsx)(s.Z,{to:"/places/".concat(e.id),children:"EDIT"}),n.userId===e.creatorId&&(0,h.jsx)(s.Z,{danger:!0,onClick:function(){return _(!0)},children:"DELETE"})]})]})})]})},v=function(e){var n=e.items,r=e.onDeletePlace;return 0===n.length?(0,h.jsx)("div",{className:"place-list center",children:(0,h.jsxs)(a.Z,{children:[(0,h.jsx)("h2",{children:"No Places Found. Maybe Create one?"}),(0,h.jsx)(s.Z,{to:"/places/new",children:"Share Place"})]})}):(0,h.jsx)("ul",{className:"place-list",children:n.map((function(e){return(0,h.jsx)(j,{id:e.id,image:e.imageUrl,title:e.title,description:e.description,address:e.address,creatorId:e.creator,coordinates:e.location,onDeletePlace:r},e.id)}))})},Z=r(6871),C=function(){var e=(0,Z.UO)().userId,n=(0,c.useState)([]),r=(0,t.Z)(n,2),s=r[0],a=r[1],o=(0,p.Z)(),i=o.isLoading,l=o.error,m=o.sendRequest,f=o.resetError;if((0,c.useEffect)((function(){m("".concat("https://places-project-1.herokuapp.com/api","/places/user/").concat(e)).then((function(e){return a(e.places)}))}),[m,e]),i)return(0,h.jsx)("div",{className:"center",children:(0,h.jsx)(d.Z,{})});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Z,{error:l,onClear:f}),!i&&s&&(0,h.jsx)(v,{items:s,onDeletePlace:function(e){a((function(n){return n.filter((function(n){return n.id!==e}))}))}})]})}},9518:function(e,n,r){r.d(n,{Z:function(){return c}});r(2791);var t=r(184),c=function(e){return(0,t.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}},8984:function(e,n,r){r(2791);var t=r(4127),c=r(5945),s=r(184);n.Z=function(e){return(0,s.jsx)(t.Z,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:(0,s.jsx)(c.Z,{onClick:e.onClear,children:"Okay"}),children:(0,s.jsx)("p",{children:e.error})})}},4127:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(1413),c=(r(2791),r(4164)),s=r(1300),a=r(1776),o=r(184),i=function(e){var n=(0,o.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[(0,o.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:(0,o.jsx)("h2",{children:e.header})}),(0,o.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[(0,o.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),(0,o.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return c.createPortal(n,document.querySelector("#modal"))},l=function(e){return(0,o.jsxs)(o.Fragment,{children:[e.show&&(0,o.jsx)(s.Z,{onClick:e.onCancel}),(0,o.jsx)(a.Z,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:(0,o.jsx)(i,(0,t.Z)({},e))})]})}},9508:function(e,n,r){var t=r(5861),c=r(885),s=r(7757),a=r.n(s),o=r(4569),i=r.n(o),l=r(2791);n.Z=function(){var e=(0,l.useState)(!1),n=(0,c.Z)(e,2),r=n[0],s=n[1],o=(0,l.useState)(null),u=(0,c.Z)(o,2),d=u[0],h=u[1],m=(0,l.useRef)([]),f=(0,l.useCallback)(function(){var e=(0,t.Z)(a().mark((function e(n){var r,t,c,o,l,u,d=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"GET",t=d.length>2&&void 0!==d[2]?d[2]:null,c=d.length>3&&void 0!==d[3]?d[3]:{},s(!0),o=new AbortController,m.current.push(o),e.prev=6,e.next=9,i()({method:r,url:n,data:t,headers:c,signal:o.signal});case 9:return l=e.sent,u=l.data,m.current=m.current.filter((function(e){return e!==o})),s(!1),e.abrupt("return",u);case 16:return e.prev=16,e.t0=e.catch(6),s(!1),h(e.t0.response.data.message||"Something went wrong"),e.abrupt("return",{error:e.t0.response.data.message||"Something went wrong"});case 21:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(n){return e.apply(this,arguments)}}(),[]),p=(0,l.useCallback)((function(){return h(null)}),[]);return(0,l.useEffect)((function(){return function(){m.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:r,error:d,sendRequest:f,resetError:p}}}}]);
//# sourceMappingURL=457.2fbe6f36.chunk.js.map